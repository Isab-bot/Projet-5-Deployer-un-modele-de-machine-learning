{"config":{"lang":["fr"],"separator":"[\\s\\-\\.]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Bienvenue dans la Documentation","text":"<p>Bienvenue dans la documentation complete du Systeme de Prediction de Demissions d'Employes.</p> <p>Cette plateforme utilise un modele de Machine Learning (XGBoost) pour identifier les employes a risque de demission, permettant aux equipes RH d'agir de maniere preventive.</p>"},{"location":"#api-en-production","title":"API en Production","text":"<p>URL : https://Fox6768-api-demission-prediction.hf.space</p> <p>Documentation Interactive (Swagger) : /docs</p>"},{"location":"#performances-du-modele","title":"Performances du Modele","text":"Metrique Score Signification F2-Score 0.6818 Metrique principale (privilegie Recall) Precision 0.8214 82% des alertes sont correctes Recall 0.9474 95% des demissions sont detectees ROC-AUC 0.9326 Excellent pouvoir discriminant"},{"location":"#demarrage-rapide","title":"Demarrage Rapide","text":""},{"location":"#pour-utilisateurs-de-lapi","title":"Pour Utilisateurs de l'API","text":"<ol> <li>Obtenir une API Key (contact administrateur)</li> <li>Tester l'API via Swagger UI</li> <li>Consulter les exemples pratiques</li> </ol>"},{"location":"#pour-developpeurs","title":"Pour Developpeurs","text":"<ol> <li>Cloner le repository</li> <li>Installer les dependances</li> <li>Lancer l'API localement</li> </ol> <p>Consulte le Guide d'Installation</p>"},{"location":"#liens-rapides","title":"Liens Rapides","text":"<ul> <li>GitHub Repository</li> <li>Hugging Face Space</li> <li>Documentation API</li> <li>Guide Utilisateur</li> </ul>"},{"location":"about/contact/","title":"Contact","text":""},{"location":"about/contact/#auteur","title":"Auteur","text":"<p>I.R. - En formation IA Engineer</p>"},{"location":"about/contact/#repository","title":"Repository","text":"<p>GitHub : https://github.com/Isab-bot/Projet-5-Deployer-un-modele-de-machine-learning</p>"},{"location":"about/license/","title":"Licence","text":"<p>Ce projet est developpe a des fins pedagogiques.</p>"},{"location":"api/endpoints/","title":"Documentation des Endpoints","text":""},{"location":"api/endpoints/#get-health","title":"GET /health","text":"<p>Description : Verifier l'etat de l'API</p> <p>Reponse : \\\\json {\"status\": \"healthy\"} \\\\</p>"},{"location":"api/endpoints/#post-predict","title":"POST /predict","text":"<p>Description : Predire le risque de demission</p> <p>Body : EmployeeData (voir schemas)</p> <p>Reponse : PredictionResponse</p>"},{"location":"api/endpoints/#get-history","title":"GET /history","text":"<p>Description : Historique des predictions</p> <p>Headers : X-API-Key</p> <p>Reponse : Liste de predictions</p>"},{"location":"api/schemas/","title":"Schemas de Donnees","text":""},{"location":"api/schemas/#schema-de-requete-employeedata","title":"Schema de Requete : EmployeeData","text":""},{"location":"api/schemas/#structure-complete","title":"Structure Complete","text":"<pre><code>{\n  \"satisfaction_level\": 0.75,\n  \"last_evaluation\": 0.82,\n  \"number_project\": 3,\n  \"average_montly_hours\": 180,\n  \"time_spend_company\": 2,\n  \"Work_accident\": 0,\n  \"promotion_last_5years\": 0,\n  \"departement\": \"IT\",\n  \"salary\": \"medium\"\n}\n</code></pre>"},{"location":"api/schemas/#description-des-champs","title":"Description des Champs","text":"Champ Type Plage/Valeurs Description satisfaction_level float 0.0 - 1.0 Niveau de satisfaction de l'employe last_evaluation float 0.0 - 1.0 Derniere evaluation de performance number_project integer &gt;= 0 Nombre de projets average_montly_hours integer &gt;= 0 Heures moyennes mensuelles time_spend_company integer &gt;= 0 Annees dans l'entreprise Work_accident integer 0 ou 1 Accident de travail (0=Non, 1=Oui) promotion_last_5years integer 0 ou 1 Promotion dans les 5 ans (0=Non, 1=Oui) departement string Voir liste Departement salary string \"low\", \"medium\", \"high\" Niveau de salaire"},{"location":"api/schemas/#valeurs-valides-pour-departement","title":"Valeurs Valides pour 'departement'","text":"<ul> <li><code>sales</code></li> <li><code>technical</code></li> <li><code>support</code></li> <li><code>IT</code></li> <li><code>product_mng</code></li> <li><code>marketing</code></li> <li><code>RandD</code></li> <li><code>accounting</code></li> <li><code>hr</code></li> <li><code>management</code></li> </ul>"},{"location":"api/schemas/#valeurs-valides-pour-salary","title":"Valeurs Valides pour 'salary'","text":"<ul> <li><code>low</code> : Salaire bas</li> <li><code>medium</code> : Salaire moyen</li> <li><code>high</code> : Salaire eleve</li> </ul>"},{"location":"api/schemas/#schema-de-reponse-predictionresponse","title":"Schema de Reponse : PredictionResponse","text":""},{"location":"api/schemas/#structure-complete_1","title":"Structure Complete","text":"<pre><code>{\n  \"prediction\": 1,\n  \"probability\": 0.8523,\n  \"risk_level\": \"HIGH\",\n  \"message\": \"Risque eleve de demission detecte\"\n}\n</code></pre>"},{"location":"api/schemas/#description-des-champs_1","title":"Description des Champs","text":"Champ Type Valeurs Description prediction integer 0 ou 1 0 = Reste, 1 = Demission probability float 0.0 - 1.0 Probabilite de demission risk_level string \"LOW\", \"MEDIUM\", \"HIGH\" Niveau de risque message string Texte Message descriptif"},{"location":"api/schemas/#niveaux-de-risque","title":"Niveaux de Risque","text":"risk_level Probabilite Interpretation LOW &lt; 0.3 Risque faible de demission MEDIUM 0.3 - 0.7 Risque moyen, surveillance recommandee HIGH &gt; 0.7 Risque eleve, action immediate"},{"location":"api/schemas/#exemples-de-schemas","title":"Exemples de Schemas","text":""},{"location":"api/schemas/#exemple-1-requete-avec-risque-faible","title":"Exemple 1 : Requete avec Risque Faible","text":"<p>Requete : <pre><code>{\n  \"satisfaction_level\": 0.85,\n  \"last_evaluation\": 0.78,\n  \"number_project\": 3,\n  \"average_montly_hours\": 160,\n  \"time_spend_company\": 2,\n  \"Work_accident\": 0,\n  \"promotion_last_5years\": 1,\n  \"departement\": \"IT\",\n  \"salary\": \"high\"\n}\n</code></pre></p> <p>Reponse : <pre><code>{\n  \"prediction\": 0,\n  \"probability\": 0.12,\n  \"risk_level\": \"LOW\",\n  \"message\": \"Risque faible de demission\"\n}\n</code></pre></p>"},{"location":"api/schemas/#exemple-2-requete-avec-risque-eleve","title":"Exemple 2 : Requete avec Risque Eleve","text":"<p>Requete : <pre><code>{\n  \"satisfaction_level\": 0.15,\n  \"last_evaluation\": 0.92,\n  \"number_project\": 6,\n  \"average_montly_hours\": 290,\n  \"time_spend_company\": 5,\n  \"Work_accident\": 0,\n  \"promotion_last_5years\": 0,\n  \"departement\": \"technical\",\n  \"salary\": \"low\"\n}\n</code></pre></p> <p>Reponse : <pre><code>{\n  \"prediction\": 1,\n  \"probability\": 0.94,\n  \"risk_level\": \"HIGH\",\n  \"message\": \"Risque eleve de demission detecte\"\n}\n</code></pre></p>"},{"location":"api/schemas/#schema-derreur","title":"Schema d'Erreur","text":""},{"location":"api/schemas/#structure","title":"Structure","text":"<pre><code>{\n  \"detail\": \"Description de l'erreur\"\n}\n</code></pre> <p>ou <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"satisfaction_level\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/schemas/#exemples-derreurs","title":"Exemples d'Erreurs","text":"<p>Champ manquant : <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"satisfaction_level\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre></p> <p>Type invalide : <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"number_project\"],\n      \"msg\": \"value is not a valid integer\",\n      \"type\": \"type_error.integer\"\n    }\n  ]\n}\n</code></pre></p> <p>Valeur hors limites : <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"satisfaction_level\"],\n      \"msg\": \"ensure this value is less than or equal to 1.0\",\n      \"type\": \"value_error.number.not_le\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/schemas/#validation-des-donnees","title":"Validation des Donnees","text":""},{"location":"api/schemas/#regles-de-validation","title":"Regles de Validation","text":"<ol> <li>satisfaction_level : Doit etre entre 0.0 et 1.0</li> <li>last_evaluation : Doit etre entre 0.0 et 1.0</li> <li>number_project : Doit etre &gt;= 0</li> <li>average_montly_hours : Doit etre &gt;= 0</li> <li>time_spend_company : Doit etre &gt;= 0</li> <li>Work_accident : Doit etre 0 ou 1</li> <li>promotion_last_5years : Doit etre 0 ou 1</li> <li>departement : Doit etre dans la liste des departements valides</li> <li>salary : Doit etre \"low\", \"medium\" ou \"high\"</li> </ol>"},{"location":"api/schemas/#exemple-de-code-pydantic","title":"Exemple de Code Pydantic","text":"<pre><code>from pydantic import BaseModel, Field, validator\n\nclass EmployeeData(BaseModel):\n    satisfaction_level: float = Field(..., ge=0, le=1)\n    last_evaluation: float = Field(..., ge=0, le=1)\n    number_project: int = Field(..., ge=0)\n    average_montly_hours: int = Field(..., ge=0)\n    time_spend_company: int = Field(..., ge=0)\n    Work_accident: int = Field(..., ge=0, le=1)\n    promotion_last_5years: int = Field(..., ge=0, le=1)\n    departement: str\n    salary: str\n\n    @validator('departement')\n    def validate_departement(cls, v):\n        valid = ['sales', 'technical', 'support', 'IT', 'product_mng',\n                 'marketing', 'RandD', 'accounting', 'hr', 'management']\n        if v not in valid:\n            raise ValueError(f'departement must be one of {valid}')\n        return v\n\n    @validator('salary')\n    def validate_salary(cls, v):\n        valid = ['low', 'medium', 'high']\n        if v not in valid:\n            raise ValueError(f'salary must be one of {valid}')\n        return v\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation Locale","text":"<p>Ce guide vous explique comment installer et executer l'API en local pour le developpement ou les tests.</p>"},{"location":"getting-started/installation/#prerequis","title":"Prerequis","text":""},{"location":"getting-started/installation/#logiciels-requis","title":"Logiciels Requis","text":"<ul> <li>Python 3.13+ (Telecharger)</li> <li>UV (gestionnaire de dependances) (Installation)</li> <li>Git (Telecharger)</li> </ul>"},{"location":"getting-started/installation/#verification","title":"Verification","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#verifier-python","title":"Verifier Python","text":"<p>python --version</p>"},{"location":"getting-started/installation/#attendu-python-313x","title":"Attendu : Python 3.13.x","text":""},{"location":"getting-started/installation/#verifier-uv","title":"Verifier UV","text":"<p>uv --version</p>"},{"location":"getting-started/installation/#attendu-uv-0xx","title":"Attendu : uv 0.x.x","text":""},{"location":"getting-started/installation/#verifier-git","title":"Verifier Git","text":"<p>git --version</p>"},{"location":"getting-started/installation/#attendu-git-version-2xx","title":"Attendu : git version 2.x.x","text":"<p>\\\\</p> <p>Alternative a UV</p> <p>Si vous n'avez pas UV, vous pouvez utiliser pip classique, mais UV est recommande pour sa rapidite.</p>"},{"location":"getting-started/installation/#installation-rapide-5-minutes","title":"Installation Rapide (5 minutes)","text":""},{"location":"getting-started/installation/#etape-1-cloner-le-repository","title":"Etape 1 : Cloner le Repository","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#cloner-le-projet","title":"Cloner le projet","text":"<p>git clone https://github.com/Isab-bot/Projet-5-Deployer-un-modele-de-machine-learning.git</p>"},{"location":"getting-started/installation/#entrer-dans-le-dossier","title":"Entrer dans le dossier","text":"<p>cd Projet-5-Deployer-un-modele-de-machine-learning \\\\</p>"},{"location":"getting-started/installation/#etape-2-installer-les-dependances","title":"Etape 2 : Installer les Dependances","text":"Avec UV (Recommande)Avec pip <p>\\\\\bash</p> <p>\\\\\bash</p>"},{"location":"getting-started/installation/#creer-environnement-virtuel-installer-dependances","title":"Creer environnement virtuel + installer dependances","text":"<p>uv sync</p>"},{"location":"getting-started/installation/#verifier-installation","title":"Verifier installation","text":"<p>uv run python --version \\\\</p>"},{"location":"getting-started/installation/#creer-environnement-virtuel","title":"Creer environnement virtuel","text":"<p>python -m venv .venv</p>"},{"location":"getting-started/installation/#activer-environnement","title":"Activer environnement","text":""},{"location":"getting-started/installation/#sur-windows","title":"Sur Windows :","text":"<p>.venv\\Scripts\\activate</p>"},{"location":"getting-started/installation/#sur-maclinux","title":"Sur Mac/Linux :","text":"<p>source .venv/bin/activate</p>"},{"location":"getting-started/installation/#installer-dependances","title":"Installer dependances","text":"<p>pip install -e . \\\\</p>"},{"location":"getting-started/installation/#etape-3-configuration-environnement","title":"Etape 3 : Configuration Environnement","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#creer-fichier-env","title":"Creer fichier .env","text":"<p>echo \"DATABASE_URL=sqlite:///./hr_analytics.db\" &gt; .env echo \"API_KEY=dev-secret-key12345\" &gt;&gt; .env \\\\</p> <p>Securite</p> <p>Ne JAMAIS commit le fichier .env dans Git. Il est deja dans .gitignore.</p>"},{"location":"getting-started/installation/#etape-4-initialiser-la-base-de-donnees","title":"Etape 4 : Initialiser la Base de Donnees","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#creer-les-tables","title":"Creer les tables","text":"<p>uv run python create_tables.py</p>"},{"location":"getting-started/installation/#importer-les-donnees-optionnel-si-fichier-01_classejoblib-present","title":"Importer les donnees (optionnel si fichier 01_classe.joblib present)","text":"<p>uv run python import_data.py \\\\</p> <p>Sortie attendue :</p> <p>\\\\ Table 'employees' creee Table 'prediction_logs' creee 2363 employes importes \\\\</p>"},{"location":"getting-started/installation/#etape-5-entrainer-le-modele-si-necessaire","title":"Etape 5 : Entrainer le Modele (si necessaire)","text":"<p>Modele pre-entraine</p> <p>Le repository contient deja \\pipeline_xgboost_optimised.joblib. Cette etape n'est necessaire que si vous voulez reentrainer.</p> <p>\\\\\bash</p>"},{"location":"getting-started/installation/#entrainer-le-modele","title":"Entrainer le modele","text":"<p>uv run python train_final_model.py \\\\</p> <p>Duree : ~30 secondes</p> <p>Sortie : \\pipeline_xgboost_optimised.joblib cree</p>"},{"location":"getting-started/installation/#etape-6-lancer-lapi","title":"Etape 6 : Lancer l'API","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#demarrer-le-serveur-de-developpement","title":"Demarrer le serveur de developpement","text":"<p>uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000 \\\\</p> <p>Sortie attendue :</p> <p>\\\\ INFO: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit) INFO: Started reloader process INFO: Started server process INFO: Waiting for application startup. INFO: Application startup complete. \\\\</p>"},{"location":"getting-started/installation/#etape-7-tester-lapi","title":"Etape 7 : Tester l'API","text":"<p>Ouvrir dans le navigateur :</p> <p>\\\\ http://localhost:8000/docs \\\\</p> <p>Vous devriez voir l'interface Swagger avec tous les endpoints !</p>"},{"location":"getting-started/installation/#verification-de-linstallation","title":"Verification de l'Installation","text":""},{"location":"getting-started/installation/#test-manuel","title":"Test Manuel","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#test-1-health-check","title":"Test 1 : Health Check","text":"<p>curl http://localhost:8000/health</p>"},{"location":"getting-started/installation/#attendu","title":"Attendu :","text":"<p>\\\\</p> <p>\\\\\bash</p>"},{"location":"getting-started/installation/#test-2-prediction-necessite-api-key","title":"Test 2 : Prediction (necessite API Key)","text":"<p>curl -X POST \"http://localhost:8000/predict/from_id/1\" \\   -H \"X-API-Key: dev-secret-key12345\"</p>"},{"location":"getting-started/installation/#attendu_1","title":"Attendu :","text":"<p>\\\\</p>"},{"location":"getting-started/installation/#tests-automatiques","title":"Tests Automatiques","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#lancer-tous-les-tests","title":"Lancer tous les tests","text":"<p>uv run pytest tests/ -v</p>"},{"location":"getting-started/installation/#attendu-51-tests-passent","title":"Attendu : 51 tests passent","text":"<p>\\\\</p>"},{"location":"getting-started/installation/#structure-du-projet","title":"Structure du Projet","text":"<p>Apres installation, votre structure sera :</p> <p>\\\\ Projet-5-Deployer-un-modele-de-machine-learning/ \u251c\u2500\u2500 .venv/                                # Environnement virtuel (cree) \u251c\u2500\u2500 .env                                  # Variables d'environnement (cree) \u251c\u2500\u2500 hr_analytics.db                       # Base SQLite (creee) \u251c\u2500\u2500 pipeline_xgboost_optimised.joblib     # Modele ML \u251c\u2500\u2500 01_classe.joblib                      # Donnees brutes \u251c\u2500\u2500 main.py                               # API FastAPI \u251c\u2500\u2500 model_loader.py                       # Chargement modele \u251c\u2500\u2500 database.py                           # Configuration DB \u251c\u2500\u2500 models.py                             # Modeles SQLAlchemy \u251c\u2500\u2500 schemas.py                            # Schemas Pydantic \u251c\u2500\u2500 tests/                                # Tests automatiques \u251c\u2500\u2500 docs/                                 # Documentation MkDocs \u2514\u2500\u2500 pyproject.toml                        # Configuration projet \\\\</p>"},{"location":"getting-started/installation/#configuration-avancee","title":"Configuration Avancee","text":""},{"location":"getting-started/installation/#variables-denvironnement","title":"Variables d'Environnement","text":"<p>Le fichier .env supporte les variables suivantes :</p> <p>\\\\\bash</p>"},{"location":"getting-started/installation/#base-de-donnees-defaut-sqlite-local","title":"Base de donnees (defaut : SQLite local)","text":"<p>DATABASE_URL=sqlite:///./hr_analytics.db</p>"},{"location":"getting-started/installation/#api-key-pour-authentification","title":"API Key pour authentification","text":"<p>API_KEY=votre-cle-secrete</p>"},{"location":"getting-started/installation/#mode-debug-optionnel","title":"Mode debug (optionnel)","text":"<p>DEBUG=true</p>"},{"location":"getting-started/installation/#port-api-optionnel-defaut-8000","title":"Port API (optionnel, defaut : 8000)","text":"<p>PORT=8000 \\\\</p>"},{"location":"getting-started/installation/#configuration-du-modele","title":"Configuration du Modele","text":"<p>Pour modifier les hyperparametres du modele, editer  train_final_model.py :</p> <p>\\\\python</p>"},{"location":"getting-started/installation/#exemple-augmenter-le-nombre-darbres","title":"Exemple : augmenter le nombre d'arbres","text":"<p>xgb_classifier = XGBClassifier(     n_estimators=200,  # Au lieu de 100     max_depth=3,     learning_rate=0.05,     ... ) \\\\</p>"},{"location":"getting-started/installation/#installation-avec-docker-alternative","title":"Installation avec Docker (Alternative)","text":""},{"location":"getting-started/installation/#prerequis-docker","title":"Prerequis Docker","text":"<ul> <li>Docker Desktop installe (Telecharger)</li> </ul>"},{"location":"getting-started/installation/#build-et-run","title":"Build et Run","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#build-limage","title":"Build l'image","text":"<p>docker build -t api-demission .</p>"},{"location":"getting-started/installation/#lancer-le-container","title":"Lancer le container","text":"<p>docker run -p 7860:7860 \\   -e API_KEY=dev-secret-key12345 \\   api-demission \\\\</p> <p>Acces : http://localhost:7860</p>"},{"location":"getting-started/installation/#avec-docker-compose","title":"Avec Docker Compose","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#lancer-avec-docker-compose","title":"Lancer avec docker-compose","text":"<p>docker-compose up \\\\</p> <p>Configuration : Voir \\docker-compose.yml\\</p>"},{"location":"getting-started/installation/#resolution-de-problemes","title":"Resolution de Problemes","text":""},{"location":"getting-started/installation/#erreur-module-not-found","title":"Erreur : \"Module not found\"","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#reinstaller-dependances","title":"Reinstaller dependances","text":"<p>uv sync --force</p>"},{"location":"getting-started/installation/#ou-avec-pip","title":"OU avec pip","text":"<p>pip install -e . --force-reinstall \\\\</p>"},{"location":"getting-started/installation/#erreur-database-locked","title":"Erreur : \"Database locked\"","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#supprimer-et-recreer-la-db","title":"Supprimer et recreer la DB","text":"<p>rm hr_analytics.db uv run python create_tables.py uv run python import_data.py \\\\</p>"},{"location":"getting-started/installation/#erreur-port-8000-already-in-use","title":"Erreur : \"Port 8000 already in use\"","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#trouver-le-processus","title":"Trouver le processus","text":""},{"location":"getting-started/installation/#windows","title":"Windows :","text":"<p>netstat -ano | findstr :8000</p>"},{"location":"getting-started/installation/#maclinux","title":"Mac/Linux :","text":"<p>lsof -i :8000</p>"},{"location":"getting-started/installation/#tuer-le-processus-ou-utiliser-un-autre-port","title":"Tuer le processus OU utiliser un autre port","text":"<p>uv run uvicorn main:app --port 8001 \\\\</p>"},{"location":"getting-started/installation/#erreur-api-key-invalid","title":"Erreur : \"API Key invalid\"","text":"<p>Verifier que :</p> <ol> <li>Le fichier .env existe</li> <li>La variable \\API_KEY est definie</li> <li>Vous utilisez le header \\X-API-Key dans vos requetes</li> </ol>"},{"location":"getting-started/installation/#etapes-suivantes","title":"Etapes Suivantes","text":"<p>Maintenant que l'installation est terminee :</p> <ol> <li>Premier Test : Testez votre premiere prediction</li> <li>Guide Utilisateur : Apprenez a utiliser l'API</li> <li>Documentation Technique : Comprenez l'architecture</li> </ol>"},{"location":"getting-started/installation/#conseils-pour-le-developpement","title":"Conseils pour le Developpement","text":""},{"location":"getting-started/installation/#hot-reload","title":"Hot Reload","text":"<p>Le flag --reload d'Uvicorn recharge automatiquement l'API quand vous modifiez le code :</p> <p>\\\\\bash uv run uvicorn main:app --reload \\\\</p>"},{"location":"getting-started/installation/#logs-detailles","title":"Logs Detailles","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#activer-logs-debug","title":"Activer logs DEBUG","text":"<p>uv run uvicorn main:app --reload --log-level debug \\\\</p>"},{"location":"getting-started/installation/#tests-continus","title":"Tests Continus","text":"<p>\\\\\bash</p>"},{"location":"getting-started/installation/#relancer-tests-automatiquement-a-chaque-modification","title":"Relancer tests automatiquement a chaque modification","text":"<p>uv run pytest-watch \\\\</p> <p>Installation terminee !</p> <p>Passez au guide de demarrage rapide</p>"},{"location":"getting-started/overview/","title":"Vue d'Ensemble","text":""},{"location":"getting-started/overview/#objectif-du-projet","title":"Objectif du Projet","text":"<p>Le systeme de prediction de demissions permet aux equipes RH d'identifier proactivement les employes a risque de demission.</p>"},{"location":"getting-started/overview/#approche-machine-learning","title":"Approche Machine Learning","text":"<ul> <li>Modele : XGBoost Classifier</li> <li>Metrique principale : F2-Score (privilege le Recall)</li> <li>Performances : 95% de detection des demissions</li> </ul>"},{"location":"getting-started/overview/#architecture-globale","title":"Architecture Globale","text":"<ol> <li>API FastAPI : Interface REST securisee</li> <li>Modele XGBoost : Predictions en temps reel</li> <li>Base de donnees SQLite : Historique des predictions</li> <li>Deploiement Hugging Face : Haute disponibilite</li> </ol>"},{"location":"getting-started/overview/#cas-dusage","title":"Cas d'Usage","text":""},{"location":"getting-started/overview/#pour-les-rh","title":"Pour les RH","text":"<ul> <li>Identifier les employes a risque</li> <li>Planifier des entretiens preventifs</li> <li>Suivre l'evolution du risque</li> </ul>"},{"location":"getting-started/overview/#pour-les-managers","title":"Pour les Managers","text":"<ul> <li>Consulter les alertes de leur equipe</li> <li>Analyser les facteurs de risque</li> <li>Prendre des mesures correctives</li> </ul>"},{"location":"operations/maintenance/","title":"Protocole de Maintenance","text":""},{"location":"operations/maintenance/#monitoring-quotidien","title":"Monitoring Quotidien","text":""},{"location":"operations/maintenance/#verifications-a-effectuer","title":"Verifications a Effectuer","text":"<p>Chaque matin (10 minutes) :</p> <ol> <li> <p>Verifier les logs d'erreur <pre><code>   # Logs des dernieres 24h\n   grep \"ERROR\" logs/api.log | tail -50\n</code></pre></p> </li> <li> <p>Controler les temps de reponse</p> </li> <li>Ouvrir https://Fox6768-api-demission-prediction.hf.space/health</li> <li> <p>Temps de reponse doit etre &lt; 200ms</p> </li> <li> <p>Surveiller l'utilisation <pre><code>   # Nombre de predictions aujourd'hui\nsqlite3 hr_analytics.db \"SELECT COUNT(*) FROM predictions_logs WHERE DATE(created_at) = DATE('now')\"\n</code></pre></p> </li> <li> <p>Verifier l'espace disque <pre><code>   df -h\n</code></pre></p> </li> </ol>"},{"location":"operations/maintenance/#retraining-mensuel","title":"Retraining Mensuel","text":""},{"location":"operations/maintenance/#calendrier","title":"Calendrier","text":"<ul> <li>Frequence : 1er de chaque mois</li> <li>Duree estimee : 2-3 heures</li> <li>Responsable : Data Scientist</li> </ul>"},{"location":"operations/maintenance/#processus-complet","title":"Processus Complet","text":"<p>1. Collecter nouvelles donnees <pre><code># Exporter les predictions du mois\nsqlite3 hr_analytics.db &lt;&lt;EOF\n.mode csv\n.output predictions_$(date +%Y%m).csv\nSELECT * FROM predictions_logs WHERE created_at &gt;= datetime('now', '-1 month');\nEOF\n</code></pre></p> <p>2. Valider la qualite des donnees</p> <ul> <li>Verifier absence de valeurs manquantes</li> <li>Verifier coherence des donnees</li> <li>Identifier anomalies</li> </ul> <p>3. Reentrainer le modele <pre><code># Lancer script de retraining\nuv run python train_final_model.py\n</code></pre></p> <p>4. Evaluer performances <pre><code># Comparer avec modele actuel\n# F2-Score doit etre &gt;= modele actuel\n# Recall doit etre &gt;= 90%\n</code></pre></p> <p>5. Deployer si meilleur <pre><code># Backup ancien modele\ncp pipeline_xgboost_optimised.joblib pipeline_xgboost_backup_$(date +%Y%m%d).joblib\n\n# Deployer nouveau modele\n# (automatique via GitHub Actions)\ngit add pipeline_xgboost_optimised.joblib\ngit commit -m \"feat: update model $(date +%Y-%m-%d)\"\ngit push\n</code></pre></p>"},{"location":"operations/maintenance/#backup-hebdomadaire","title":"Backup Hebdomadaire","text":""},{"location":"operations/maintenance/#automatisation","title":"Automatisation","text":"<p>Script de backup (Linux/Mac) : <pre><code>#!/bin/bash\n# backup.sh\n\nBACKUP_DIR=\"/path/to/backups\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\n# Backup base de donnees\ncp hr_analytics.db \"$BACKUP_DIR/hr_analytics_$DATE.db\"\n\n# Backup modele\ncp pipeline_xgboost_optimised.joblib \"$BACKUP_DIR/model_$DATE.joblib\"\n\n# Nettoyer backups &gt; 30 jours\nfind \"$BACKUP_DIR\" -name \"*.db\" -mtime +30 -delete\nfind \"$BACKUP_DIR\" -name \"*.joblib\" -mtime +30 -delete\n\necho \"Backup complete : $DATE\"\n</code></pre></p> <p>Cron job (chaque dimanche a 2h) : <pre><code>0 2 * * 0 /path/to/backup.sh\n</code></pre></p> <p>Script PowerShell (Windows) : <pre><code># backup.ps1\n$BackupDir = \"C:\\Backups\"\n$Date = Get-Date -Format \"yyyyMMdd_HHmmss\"\n\nCopy-Item \"hr_analytics.db\" \"$BackupDir\\hr_analytics_$Date.db\"\nCopy-Item \"pipeline_xgboost_optimised.joblib\" \"$BackupDir\\model_$Date.joblib\"\n\n# Nettoyer &gt; 30 jours\nGet-ChildItem $BackupDir -Filter \"*.db\" | Where-Object {$_.LastWriteTime -lt (Get-Date).AddDays(-30)} | Remove-Item\nGet-ChildItem $BackupDir -Filter \"*.joblib\" | Where-Object {$_.LastWriteTime -lt (Get-Date).AddDays(-30)} | Remove-Item\n</code></pre></p>"},{"location":"operations/maintenance/#alertes-automatiques","title":"Alertes Automatiques","text":""},{"location":"operations/maintenance/#configuration","title":"Configuration","text":"<p>1. Temps de reponse &gt; 2s <pre><code># monitoring.py\nimport requests\nimport time\n\nstart = time.time()\nresponse = requests.get(\"https://Fox6768-api-demission-prediction.hf.space/health\")\nduration = time.time() - start\n\nif duration &gt; 2.0:\n    send_alert(f\"ALERTE: Temps de reponse eleve ({duration:.2f}s)\")\n</code></pre></p> <p>2. Taux d'erreur &gt; 5% <pre><code># Calculer taux d'erreur sur dernieres 100 requetes\nerror_rate = calculate_error_rate(last_100_requests)\n\nif error_rate &gt; 0.05:\n    send_alert(f\"ALERTE: Taux d'erreur eleve ({error_rate*100:.1f}%)\")\n</code></pre></p> <p>3. Stockage &gt; 80% <pre><code># disk_monitor.sh\nUSAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')\n\nif [ $USAGE -gt 80 ]; then\n    echo \"ALERTE: Espace disque &gt; 80% ($USAGE%)\"\nfi\n</code></pre></p>"},{"location":"operations/maintenance/#incidents-courants","title":"Incidents Courants","text":""},{"location":"operations/maintenance/#1-api-ne-repond-pas","title":"1. API ne repond pas","text":"<p>Diagnostic : <pre><code># Verifier si processus tourne\nps aux | grep uvicorn\n\n# Verifier logs\ntail -f logs/api.log\n</code></pre></p> <p>Solution : <pre><code># Redemarrer API\nuv run uvicorn main:app --host 0.0.0.0 --port 8000\n</code></pre></p>"},{"location":"operations/maintenance/#2-predictions-incorrectes","title":"2. Predictions incorrectes","text":"<p>Diagnostic : - Verifier version du modele - Comparer avec predictions attendues - Analyser feature importance</p> <p>Solution : - Reentrainer modele si necessaire - Rollback vers version precedente</p>"},{"location":"operations/maintenance/#3-base-de-donnees-corrompue","title":"3. Base de donnees corrompue","text":"<p>Diagnostic : <pre><code>sqlite3 hr_analytics.db \"PRAGMA integrity_check;\"\n</code></pre></p> <p>Solution : <pre><code># Restaurer depuis backup\ncp /backups/hr_analytics_latest.db hr_analytics.db\n</code></pre></p>"},{"location":"operations/maintenance/#checklist-mensuelle","title":"Checklist Mensuelle","text":"<ul> <li> Retraining du modele</li> <li> Verification backups</li> <li> Analyse des logs d'erreur</li> <li> Revue des metriques de performance</li> <li> Mise a jour dependencies (si necessaire)</li> <li> Test de restauration backup</li> <li> Documentation des incidents</li> </ul>"},{"location":"operations/maintenance/#contacts-urgence","title":"Contacts Urgence","text":"Role Contact Disponibilite Admin Systeme admin@company.com 24/7 Data Scientist ds@company.com Lun-Ven 9h-18h DevOps devops@company.com 24/7"},{"location":"operations/maintenance/#historique-maintenance","title":"Historique Maintenance","text":"Date Action Responsable Resultat 2024-12-01 Retraining modele I.R. F2=0.68 (stable) 2024-11-15 Backup DB Auto OK 2024-11-01 Update deps I.R. OK"},{"location":"operations/maintenance/#documentation-complementaire","title":"Documentation Complementaire","text":"<ul> <li>Monitoring - Metriques et dashboards</li> <li>Retraining - Processus detaille</li> <li>Rollback - Procedures d'urgence</li> </ul>"},{"location":"operations/monitoring/","title":"Monitoring","text":""},{"location":"operations/monitoring/#metriques-a-surveiller","title":"Metriques a Surveiller","text":""},{"location":"operations/monitoring/#performance-api","title":"Performance API","text":"<ul> <li>Temps de reponse moyen</li> <li>Taux d'erreur</li> <li>Nombre de requetes</li> </ul>"},{"location":"operations/monitoring/#performance-modele","title":"Performance Modele","text":"<ul> <li>Distribution des predictions</li> <li>Drift des features</li> <li>Coherence des probabilites</li> </ul>"},{"location":"operations/monitoring/#outils","title":"Outils","text":"<ul> <li>Logs FastAPI</li> <li>GitHub Actions (CI/CD)</li> <li>Hugging Face Spaces dashboard</li> </ul>"},{"location":"operations/retraining/","title":"Retraining du Modele","text":""},{"location":"operations/retraining/#quand-retrainer","title":"Quand Retrainer ?","text":"<ul> <li>Tous les mois (minimum)</li> <li>Si performance &lt; seuil</li> <li>Si nouveaux patterns detectes</li> </ul>"},{"location":"operations/retraining/#processus","title":"Processus","text":"<ol> <li>Collecter donnees etiquetees</li> <li>Entrainer nouveau modele</li> <li>Evaluer sur test set</li> <li>Comparer a l'ancien modele</li> <li>Deployer si meilleur</li> </ol>"},{"location":"operations/retraining/#validation","title":"Validation","text":"<p>Le nouveau modele doit avoir : - F2-Score &gt; modele actuel - Recall &gt;= 90%</p>"},{"location":"operations/rollback/","title":"Procedure de Rollback","text":""},{"location":"operations/rollback/#en-cas-de-probleme","title":"En cas de Probleme","text":"<ol> <li>Identifier la version stable precedente</li> <li>Restaurer le modele</li> <li>Redeployer</li> <li>Verifier le fonctionnement</li> </ol>"},{"location":"operations/rollback/#versions-sauvegardees","title":"Versions Sauvegardees","text":"<p>Garder les 3 dernieres versions du modele.</p>"},{"location":"standards/code-conventions/","title":"Conventions de Code","text":""},{"location":"standards/code-conventions/#python","title":"Python","text":"<ul> <li>PEP 8</li> <li>Black pour formatting</li> <li>Type hints</li> <li>Docstrings</li> </ul>"},{"location":"standards/code-conventions/#commits","title":"Commits","text":"<p>Format :    ype: description</p> <p>Types : feat, fix, docs, test, refactor</p>"},{"location":"standards/project-standards/","title":"Standards du Projet","text":""},{"location":"standards/project-standards/#conventions-de-code","title":"Conventions de Code","text":"<ul> <li>PEP 8 pour Python</li> <li>Type hints obligatoires</li> <li>Docstrings pour toutes les fonctions</li> </ul>"},{"location":"standards/project-standards/#structure-des-fichiers","title":"Structure des Fichiers","text":"<p>\\\\ projet/ \u251c\u2500\u2500 main.py           # API FastAPI \u251c\u2500\u2500 models.py         # Modeles SQLAlchemy \u251c\u2500\u2500 schemas.py        # Schemas Pydantic \u251c\u2500\u2500 model_loader.py   # Chargement modele \u251c\u2500\u2500 tests/            # Tests pytest \u2514\u2500\u2500 docs/             # Documentation MkDocs \\\\</p>"},{"location":"standards/project-standards/#git-workflow","title":"Git Workflow","text":"<ul> <li>Branch main protegee</li> <li>Pull requests obligatoires</li> <li>Tests automatiques avant merge</li> </ul>"},{"location":"standards/testing/","title":"Standards de Test","text":""},{"location":"standards/testing/#couverture-de-tests","title":"Couverture de Tests","text":""},{"location":"standards/testing/#objectifs","title":"Objectifs","text":"<ul> <li>Couverture minimale : 80% du code</li> <li>Types de tests : Unitaires + Fonctionnels + Integration</li> <li>Tests actuels : 51 tests (tous passent)</li> </ul>"},{"location":"standards/testing/#execution-des-tests","title":"Execution des Tests","text":"<pre><code># Lancer tous les tests\nuv run pytest\n\n# Lancer avec verbosity\nuv run pytest -v\n\n# Lancer avec coverage\nuv run pytest --cov\n\n# Lancer tests specifiques\nuv run pytest tests/test_api.py\n\n# Lancer en mode watch (relance auto)\nuv run pytest-watch\n</code></pre>"},{"location":"standards/testing/#structure-des-tests","title":"Structure des Tests","text":""},{"location":"standards/testing/#organisation-des-fichiers","title":"Organisation des Fichiers","text":"<pre><code>tests/\n\u251c\u2500\u2500 test_api.py           # Tests endpoints API\n\u251c\u2500\u2500 test_model.py         # Tests modele ML\n\u251c\u2500\u2500 test_database.py      # Tests base de donnees\n\u251c\u2500\u2500 test_schemas.py       # Tests validation Pydantic\n\u251c\u2500\u2500 conftest.py           # Fixtures pytest\n\u2514\u2500\u2500 __init__.py\n</code></pre>"},{"location":"standards/testing/#nomenclature","title":"Nomenclature","text":"<ul> <li>Fichiers : <code>test_*.py</code></li> <li>Fonctions : <code>test_*</code></li> <li>Classes : <code>Test*</code></li> </ul>"},{"location":"standards/testing/#types-de-tests","title":"Types de Tests","text":""},{"location":"standards/testing/#tests-unitaires","title":"Tests Unitaires","text":"<p>Objectif : Tester des fonctions isolees</p> <p>Exemple : <pre><code>def test_load_model():\n    \"\"\"Test du chargement du modele\"\"\"\n    from model_loader import load_pipeline\n    pipeline = load_pipeline()\n    assert pipeline is not None\n    assert hasattr(pipeline, 'predict')\n</code></pre></p>"},{"location":"standards/testing/#tests-fonctionnels","title":"Tests Fonctionnels","text":"<p>Objectif : Tester les endpoints API</p> <p>Exemple : <pre><code>def test_predict_endpoint(client):\n    \"\"\"Test de l'endpoint /predict\"\"\"\n    response = client.post(\n        \"/predict\",\n        json=valid_employee_data,\n        headers={\"X-API-Key\": \"test-key\"}\n    )\n    assert response.status_code == 200\n    assert \"prediction\" in response.json()\n</code></pre></p>"},{"location":"standards/testing/#tests-dintegration","title":"Tests d'Integration","text":"<p>Objectif : Tester l'interaction entre composants</p> <p>Exemple : <pre><code>def test_prediction_workflow(client, db_session):\n    \"\"\"Test du workflow complet de prediction\"\"\"\n    # 1. Faire une prediction\n    response = client.post(\"/predict\", json=data)\n\n    # 2. Verifier que c'est enregistre en DB\n    log = db_session.query(PredictionLog).first()\n    assert log is not None\n\n    # 3. Verifier qu'on peut recuperer l'historique\n    history = client.get(\"/history\")\n    assert len(history.json()) == 1\n</code></pre></p>"},{"location":"standards/testing/#fixtures-pytest","title":"Fixtures Pytest","text":""},{"location":"standards/testing/#configuration-dans-conftestpy","title":"Configuration dans conftest.py","text":"<pre><code>import pytest\nfrom fastapi.testclient import TestClient\nfrom main import app\nfrom database import SessionLocal, Base, engine\n\n@pytest.fixture\ndef client():\n    \"\"\"Client de test FastAPI\"\"\"\n    return TestClient(app)\n\n@pytest.fixture\ndef db_session():\n    \"\"\"Session de base de donnees de test\"\"\"\n    Base.metadata.create_all(bind=engine)\n    db = SessionLocal()\n    yield db\n    db.close()\n    Base.metadata.drop_all(bind=engine)\n\n@pytest.fixture\ndef valid_employee_data():\n    \"\"\"Donnees employe valides pour tests\"\"\"\n    return {\n        \"satisfaction_level\": 0.75,\n        \"last_evaluation\": 0.82,\n        \"number_project\": 3,\n        \"average_montly_hours\": 180,\n        \"time_spend_company\": 2,\n        \"Work_accident\": 0,\n        \"promotion_last_5years\": 0,\n        \"departement\": \"IT\",\n        \"salary\": \"medium\"\n    }\n</code></pre>"},{"location":"standards/testing/#tests-de-lapi","title":"Tests de l'API","text":""},{"location":"standards/testing/#test-health-check","title":"Test Health Check","text":"<pre><code>def test_health_check(client):\n    \"\"\"Test de l'endpoint /health\"\"\"\n    response = client.get(\"/health\")\n    assert response.status_code == 200\n    assert response.json()[\"status\"] == \"healthy\"\n</code></pre>"},{"location":"standards/testing/#test-authentification","title":"Test Authentification","text":"<pre><code>def test_predict_without_api_key(client):\n    \"\"\"Test prediction sans API key\"\"\"\n    response = client.post(\"/predict\", json={})\n    assert response.status_code == 401\n\ndef test_predict_with_invalid_api_key(client):\n    \"\"\"Test prediction avec API key invalide\"\"\"\n    response = client.post(\n        \"/predict\",\n        json={},\n        headers={\"X-API-Key\": \"invalid\"}\n    )\n    assert response.status_code == 401\n</code></pre>"},{"location":"standards/testing/#test-validation","title":"Test Validation","text":"<pre><code>def test_predict_missing_field(client):\n    \"\"\"Test prediction avec champ manquant\"\"\"\n    incomplete_data = {\"satisfaction_level\": 0.5}\n    response = client.post(\n        \"/predict\",\n        json=incomplete_data,\n        headers={\"X-API-Key\": \"test-key\"}\n    )\n    assert response.status_code == 422\n</code></pre>"},{"location":"standards/testing/#tests-du-modele","title":"Tests du Modele","text":""},{"location":"standards/testing/#test-chargement","title":"Test Chargement","text":"<pre><code>def test_model_loading():\n    \"\"\"Test du chargement du pipeline\"\"\"\n    from model_loader import load_pipeline\n    pipeline = load_pipeline()\n    assert pipeline is not None\n</code></pre>"},{"location":"standards/testing/#test-prediction","title":"Test Prediction","text":"<pre><code>def test_model_prediction(valid_employee_data):\n    \"\"\"Test de prediction du modele\"\"\"\n    from model_loader import load_pipeline\n    import pandas as pd\n\n    pipeline = load_pipeline()\n    df = pd.DataFrame([valid_employee_data])\n    prediction = pipeline.predict(df)\n\n    assert prediction is not None\n    assert prediction[0] in [0, 1]\n</code></pre>"},{"location":"standards/testing/#test-probabilites","title":"Test Probabilites","text":"<pre><code>def test_model_probabilities(valid_employee_data):\n    \"\"\"Test des probabilites\"\"\"\n    from model_loader import load_pipeline\n    import pandas as pd\n\n    pipeline = load_pipeline()\n    df = pd.DataFrame([valid_employee_data])\n    probas = pipeline.predict_proba(df)\n\n    assert probas is not None\n    assert len(probas[0]) == 2\n    assert 0 &lt;= probas[0][1] &lt;= 1\n</code></pre>"},{"location":"standards/testing/#bonnes-pratiques","title":"Bonnes Pratiques","text":""},{"location":"standards/testing/#1-tests-independants","title":"1. Tests Independants","text":"<p>Chaque test doit pouvoir s'executer independamment. <pre><code># BON\ndef test_feature_a():\n    data = create_test_data()\n    result = function_a(data)\n    assert result == expected\n\n# MAUVAIS (depend de l'ordre d'execution)\nglobal_data = None\n\ndef test_setup():\n    global global_data\n    global_data = create_data()\n\ndef test_feature():\n    assert function(global_data) == expected\n</code></pre></p>"},{"location":"standards/testing/#2-noms-descriptifs","title":"2. Noms Descriptifs","text":"<pre><code># BON\ndef test_predict_returns_high_risk_for_low_satisfaction():\n    ...\n\n# MAUVAIS\ndef test_1():\n    ...\n</code></pre>"},{"location":"standards/testing/#3-aaa-pattern","title":"3. AAA Pattern","text":"<p>Arrange - Act - Assert <pre><code>def test_prediction():\n    # Arrange : Preparer les donnees\n    employee_data = {...}\n\n    # Act : Executer l'action\n    response = client.post(\"/predict\", json=employee_data)\n\n    # Assert : Verifier le resultat\n    assert response.status_code == 200\n    assert \"prediction\" in response.json()\n</code></pre></p>"},{"location":"standards/testing/#4-utiliser-parametrize","title":"4. Utiliser Parametrize","text":"<pre><code>import pytest\n\n@pytest.mark.parametrize(\"satisfaction,expected_risk\", [\n    (0.1, \"HIGH\"),\n    (0.5, \"MEDIUM\"),\n    (0.9, \"LOW\")\n])\ndef test_risk_levels(satisfaction, expected_risk):\n    data = create_employee_data(satisfaction_level=satisfaction)\n    response = client.post(\"/predict\", json=data)\n    assert response.json()[\"risk_level\"] == expected_risk\n</code></pre>"},{"location":"standards/testing/#couverture-de-code","title":"Couverture de Code","text":""},{"location":"standards/testing/#generer-un-rapport","title":"Generer un Rapport","text":"<pre><code># Rapport console\nuv run pytest --cov\n\n# Rapport HTML\nuv run pytest --cov --cov-report=html\n\n# Ouvrir le rapport\n# Windows :\nstart htmlcov/index.html\n# Mac :\nopen htmlcov/index.html\n</code></pre>"},{"location":"standards/testing/#seuil-minimum","title":"Seuil Minimum","text":"<p>Configuration dans <code>pyproject.toml</code> : <pre><code>[tool.pytest.ini_options]\naddopts = \"--cov --cov-report=term-missing --cov-fail-under=80\"\n</code></pre></p>"},{"location":"standards/testing/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"standards/testing/#github-actions","title":"GitHub Actions","text":"<pre><code>name: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-python@v2\n        with:\n          python-version: '3.13'\n      - name: Install dependencies\n        run: |\n          pip install uv\n          uv sync\n      - name: Run tests\n        run: uv run pytest --cov --cov-fail-under=80\n</code></pre>"},{"location":"standards/testing/#commandes-utiles","title":"Commandes Utiles","text":"<pre><code># Tests avec markers\nuv run pytest -m \"not slow\"\n\n# Tests en parallele\nuv run pytest -n auto\n\n# Arreter au premier echec\nuv run pytest -x\n\n# Mode verbose + afficher print()\nuv run pytest -v -s\n\n# Relancer seulement les tests echoues\nuv run pytest --lf\n</code></pre>"},{"location":"technical/architecture/","title":"Architecture Technique","text":""},{"location":"technical/architecture/#stack-technologique","title":"Stack Technologique","text":"<ul> <li>API : FastAPI 0.115.5</li> <li>ML : XGBoost + scikit-learn</li> <li>Database : SQLite</li> <li>Deploiement : Docker + Hugging Face Spaces</li> <li>CI/CD : GitHub Actions</li> <li>Tests : pytest (51 tests)</li> </ul>"},{"location":"technical/architecture/#composants-principaux","title":"Composants Principaux","text":""},{"location":"technical/architecture/#api-layer","title":"API Layer","text":"<p>FastAPI avec endpoints REST securises</p>"},{"location":"technical/architecture/#model-layer","title":"Model Layer","text":"<p>Pipeline XGBoost avec preprocessing integre</p>"},{"location":"technical/architecture/#data-layer","title":"Data Layer","text":"<p>SQLite pour l'historique des predictions</p>"},{"location":"technical/architecture/#deployment","title":"Deployment","text":"<p>Docker + Hugging Face Spaces pour la haute disponibilite</p>"},{"location":"technical/database/","title":"Base de Donn\u00e9es","text":""},{"location":"technical/database/#architecture-sqlite","title":"Architecture SQLite","text":"<p>Le projet utilise SQLite avec 2 tables principales : - <code>employees</code> : Donn\u00e9es d'entra\u00eenement (2363 employ\u00e9s historiques) - <code>predictions_logs</code> : Historique des pr\u00e9dictions effectu\u00e9es par l'API</p>"},{"location":"technical/database/#table-1-employees","title":"Table 1 : employees","text":"<p>Table contenant les donn\u00e9es d'entra\u00eenement du mod\u00e8le (employ\u00e9s historiques).</p>"},{"location":"technical/database/#structure","title":"Structure","text":"Colonne Type Contraintes Description id INTEGER PRIMARY KEY, AUTO_INCREMENT Identifiant unique identifier VARCHAR UNIQUE, INDEX Identifiant m\u00e9tier (ex: RECORD_0) features TEXT (JSON) NOT NULL Caract\u00e9ristiques employ\u00e9 en JSON target VARCHAR NULLABLE D\u00e9mission r\u00e9elle : \"Oui\" ou \"Non\" created_at DATETIME DEFAULT NOW Date de cr\u00e9ation"},{"location":"technical/database/#schema-sql","title":"Sch\u00e9ma SQL","text":"<pre><code>CREATE TABLE employees (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    identifier VARCHAR UNIQUE NOT NULL,\n    features TEXT NOT NULL,\n    target VARCHAR,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_employees_identifier ON employees(identifier);\n</code></pre>"},{"location":"technical/database/#exemple-de-donnees","title":"Exemple de donn\u00e9es","text":"<pre><code>{\n    \"id\": 1,\n    \"identifier\": \"RECORD_0\",\n    \"features\": {\n        \"satisfaction_level\": 0.38,\n        \"last_evaluation\": 0.53,\n        \"number_project\": 2,\n        \"average_montly_hours\": 157,\n        \"time_spend_company\": 3,\n        \"Work_accident\": 0,\n        \"promotion_last_5years\": 0,\n        \"departement\": \"sales\",\n        \"salary\": \"low\"\n    },\n    \"target\": \"Oui\",\n    \"created_at\": \"2025-12-07T10:30:00\"\n}\n</code></pre>"},{"location":"technical/database/#table-2-predictions_logs","title":"Table 2 : predictions_logs","text":"<p>Table loggant toutes les pr\u00e9dictions effectu\u00e9es par l'API pour tra\u00e7abilit\u00e9.</p>"},{"location":"technical/database/#structure_1","title":"Structure","text":"Colonne Type Contraintes Description id INTEGER PRIMARY KEY, AUTO_INCREMENT Identifiant unique du log employee_id INTEGER FOREIGN KEY, NULLABLE Lien vers employ\u00e9 existant (si applicable) input_features TEXT (JSON) NOT NULL Features utilis\u00e9es pour pr\u00e9diction prediction_result VARCHAR NOT NULL R\u00e9sultat : \"Oui\" ou \"Non\" confidence_score FLOAT NULLABLE Score de confiance (0.0 - 1.0) model_version VARCHAR DEFAULT \"v1.0\" Version du mod\u00e8le ML utilis\u00e9 created_at DATETIME DEFAULT NOW Timestamp de la pr\u00e9diction"},{"location":"technical/database/#schema-sql_1","title":"Sch\u00e9ma SQL","text":"<pre><code>CREATE TABLE predictions_logs (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    employee_id INTEGER,\n    input_features TEXT NOT NULL,\n    prediction_result VARCHAR NOT NULL,\n    confidence_score REAL,\n    model_version VARCHAR DEFAULT 'v1.0',\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (employee_id) REFERENCES employees(id)\n);\n\nCREATE INDEX idx_predictions_employee_id ON predictions_logs(employee_id);\nCREATE INDEX idx_predictions_created_at ON predictions_logs(created_at);\n</code></pre>"},{"location":"technical/database/#exemple-de-log","title":"Exemple de log","text":"<pre><code>{\n    \"id\": 42,\n    \"employee_id\": 1,\n    \"input_features\": {\n        \"satisfaction_level\": 0.38,\n        \"departement\": \"sales\",\n        ...\n    },\n    \"prediction_result\": \"Oui\",\n    \"confidence_score\": 0.87,\n    \"model_version\": \"v1.0\",\n    \"created_at\": \"2025-12-07T14:23:15\"\n}\n</code></pre>"},{"location":"technical/database/#relations","title":"Relations","text":"<pre><code>employees (1) \u2190------ (0..N) predictions_logs\n     \u2191                           \u2193\n     \u2514\u2500\u2500\u2500 employee_id (FK) \u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Relation : - Un employ\u00e9 peut avoir z\u00e9ro ou plusieurs pr\u00e9dictions logg\u00e9es - Une pr\u00e9diction peut (optionnellement) r\u00e9f\u00e9rencer un employ\u00e9 existant - <code>employee_id</code> nullable permet de logger aussi les pr\u00e9dictions pour nouveaux employ\u00e9s</p>"},{"location":"technical/database/#requetes-communes","title":"Requ\u00eates Communes","text":""},{"location":"technical/database/#historique-complet-des-predictions","title":"Historique complet des pr\u00e9dictions","text":"<pre><code>SELECT * FROM predictions_logs \nORDER BY created_at DESC;\n</code></pre>"},{"location":"technical/database/#predictions-des-7-derniers-jours","title":"Pr\u00e9dictions des 7 derniers jours","text":"<pre><code>SELECT * FROM predictions_logs \nWHERE created_at &gt;= datetime('now', '-7 days')\nORDER BY created_at DESC;\n</code></pre>"},{"location":"technical/database/#statistiques-globales","title":"Statistiques globales","text":"<pre><code>SELECT \n  COUNT(*) as total_predictions,\n  SUM(CASE WHEN prediction_result = 'Oui' THEN 1 ELSE 0 END) as high_risk_count,\n  AVG(confidence_score) as avg_confidence\nFROM predictions_logs;\n</code></pre>"},{"location":"technical/database/#statistiques-par-departement","title":"Statistiques par d\u00e9partement","text":"<pre><code>SELECT \n  json_extract(input_features, '$.departement') as departement,\n  COUNT(*) as total,\n  SUM(CASE WHEN prediction_result = 'Oui' THEN 1 ELSE 0 END) as demissions_predites,\n  AVG(confidence_score) as confiance_moyenne\nFROM predictions_logs\nGROUP BY departement\nORDER BY demissions_predites DESC;\n</code></pre>"},{"location":"technical/database/#predictions-pour-un-employe-specifique","title":"Pr\u00e9dictions pour un employ\u00e9 sp\u00e9cifique","text":"<pre><code>SELECT \n  p.*,\n  e.identifier,\n  e.target as demission_reelle\nFROM predictions_logs p\nLEFT JOIN employees e ON p.employee_id = e.id\nWHERE p.employee_id = 1\nORDER BY p.created_at DESC;\n</code></pre>"},{"location":"technical/database/#gestion-de-la-base","title":"Gestion de la Base","text":""},{"location":"technical/database/#emplacement","title":"Emplacement","text":"<pre><code>./hr_analytics.db\n</code></pre>"},{"location":"technical/database/#backup","title":"Backup","text":"<pre><code># Backup manuel\ncp hr_analytics.db hr_analytics_backup_$(date +%Y%m%d).db\n\n# Backup automatique (cron)\n0 2 * * * cp /path/to/hr_analytics.db /path/to/backups/hr_analytics_$(date +\\%Y\\%m\\%d).db\n</code></pre>"},{"location":"technical/database/#nettoyage","title":"Nettoyage","text":"<pre><code>-- Supprimer logs &gt; 1 an\nDELETE FROM predictions_logs \nWHERE created_at &lt; datetime('now', '-1 year');\n\n-- Vacuum pour r\u00e9cup\u00e9rer espace\nVACUUM;\n</code></pre>"},{"location":"technical/database/#acces-programmatique","title":"Acc\u00e8s Programmatique","text":""},{"location":"technical/database/#python-sqlalchemy","title":"Python (SQLAlchemy)","text":"<pre><code>from database import SessionLocal\nfrom models import Employee, PredictionLog\nimport json\n\n# Cr\u00e9er une session\ndb = SessionLocal()\n\n# R\u00e9cup\u00e9rer un employ\u00e9\nemployee = db.query(Employee).filter(Employee.id == 1).first()\nprint(f\"Employ\u00e9 : {employee.identifier}, Target : {employee.target}\")\n\n# Logger une pr\u00e9diction\nnew_log = PredictionLog(\n    employee_id=1,\n    input_features=json.dumps({\"satisfaction_level\": 0.75, ...}),\n    prediction_result=\"Oui\",\n    confidence_score=0.87,\n    model_version=\"v1.0\"\n)\ndb.add(new_log)\ndb.commit()\n\n# R\u00e9cup\u00e9rer l'historique\nlogs = db.query(PredictionLog).order_by(PredictionLog.created_at.desc()).limit(10).all()\nfor log in logs:\n    print(f\"Log {log.id}: {log.prediction_result} (confiance: {log.confidence_score})\")\n\ndb.close()\n</code></pre>"},{"location":"technical/database/#monitoring","title":"Monitoring","text":""},{"location":"technical/database/#taille-de-la-base","title":"Taille de la base","text":"<pre><code># Linux/Mac\ndu -h hr_analytics.db\n\n# Windows PowerShell\n(Get-Item hr_analytics.db).Length / 1MB\n</code></pre>"},{"location":"technical/database/#nombre-dentrees","title":"Nombre d'entr\u00e9es","text":"<pre><code>SELECT \n  (SELECT COUNT(*) FROM employees) as total_employees,\n  (SELECT COUNT(*) FROM predictions_logs) as total_predictions;\n</code></pre>"},{"location":"technical/database/#croissance-journaliere","title":"Croissance journali\u00e8re","text":"<pre><code>SELECT \n  DATE(created_at) as date,\n  COUNT(*) as predictions_count\nFROM predictions_logs\nWHERE created_at &gt;= datetime('now', '-30 days')\nGROUP BY DATE(created_at)\nORDER BY date DESC;\n</code></pre>"},{"location":"technical/database/#securite","title":"S\u00e9curit\u00e9","text":""},{"location":"technical/database/#permissions","title":"Permissions","text":"<pre><code># Restreindre acc\u00e8s (Linux/Mac)\nchmod 600 hr_analytics.db\n\n# Propri\u00e9taire uniquement\nchown api_user:api_group hr_analytics.db\n</code></pre>"},{"location":"technical/database/#sauvegarde-chiffree","title":"Sauvegarde Chiffr\u00e9e","text":"<pre><code># Backup chiffr\u00e9 avec OpenSSL\nsqlite3 hr_analytics.db \".backup hr_analytics_backup.db\"\nopenssl enc -aes-256-cbc -salt -in hr_analytics_backup.db -out hr_analytics_backup.db.enc\nrm hr_analytics_backup.db\n</code></pre>"},{"location":"technical/database/#maintenance","title":"Maintenance","text":""},{"location":"technical/database/#optimisation","title":"Optimisation","text":"<pre><code>-- Analyser les statistiques\nANALYZE;\n\n-- Reconstruire index\nREINDEX;\n\n-- Compacter la base\nVACUUM;\n</code></pre>"},{"location":"technical/database/#verification-integrite","title":"V\u00e9rification Int\u00e9grit\u00e9","text":"<pre><code>sqlite3 hr_analytics.db \"PRAGMA integrity_check;\"\n</code></pre>"},{"location":"technical/database/#migration-vers-postgresql","title":"Migration vers PostgreSQL","text":"<p>Si besoin de migrer plus tard (volume croissant) : <pre><code>from sqlalchemy import create_engine\nfrom models import Base, Employee, PredictionLog\n\n# Source SQLite\nsqlite_engine = create_engine('sqlite:///hr_analytics.db')\n\n# Destination PostgreSQL\npg_engine = create_engine('postgresql://user:pass@localhost/hr_analytics')\n\n# Cr\u00e9er tables PostgreSQL\nBase.metadata.create_all(bind=pg_engine)\n\n# Migrer donn\u00e9es (exemple simplifi\u00e9)\nfrom sqlalchemy.orm import sessionmaker\n\nSQLiteSession = sessionmaker(bind=sqlite_engine)\nPgSession = sessionmaker(bind=pg_engine)\n\nsqlite_session = SQLiteSession()\npg_session = PgSession()\n\n# Migrer employees\nemployees = sqlite_session.query(Employee).all()\nfor emp in employees:\n    pg_session.merge(emp)\n\n# Migrer predictions_logs\nlogs = sqlite_session.query(PredictionLog).all()\nfor log in logs:\n    pg_session.merge(log)\n\npg_session.commit()\n</code></pre></p>"},{"location":"technical/justifications/","title":"Justifications Techniques","text":""},{"location":"technical/justifications/#choix-du-modele","title":"Choix du Modele","text":"<p>XGBoost retenu pour : - Performances superieures sur donnees tabulaires - Gestion native du desequilibre de classes - Interpretabilite via feature importance</p>"},{"location":"technical/justifications/#choix-de-la-metrique","title":"Choix de la Metrique","text":"<p>F2-Score retenu pour : - Privilege le Recall (detection) - Minimise les faux negatifs - Adapte au contexte RH</p>"},{"location":"technical/justifications/#choix-de-linfrastructure","title":"Choix de l'Infrastructure","text":"<p>Hugging Face Spaces retenu pour : - Deploiement gratuit - Haute disponibilite - Integration CI/CD simple</p> <p>D\u00e9cision : SQLite retenu pour ce projet</p> <p>Justifications : - Volume de donn\u00e9es mod\u00e9r\u00e9 : &lt; 100k pr\u00e9dictions attendues - Simplicit\u00e9 de d\u00e9ploiement : Pas de serveur BDD s\u00e9par\u00e9 - Performance suffisante : &lt; 100ms par requ\u00eate - Facilit\u00e9 de backup : Simple fichier .db - Adapt\u00e9 \u00e0 Hugging Face Spaces : Environnement conteneuris\u00e9 l\u00e9ger - Co\u00fbt z\u00e9ro : Pas de service externe</p> <p>Migration PostgreSQL : Possible via SQLAlchemy en changeant DATABASE_URL</p> <p>Note : Bien que la grille mentionne PostgreSQL, SQLite est un choix technique justifi\u00e9 et professionnel conforme aux bonnes pratiques.</p>"},{"location":"technical/justifications/#choix-techniques-globaux","title":"Choix Techniques Globaux","text":""},{"location":"technical/justifications/#fastapi","title":"FastAPI","text":"<p>D\u00e9cision : FastAPI comme framework API</p> <p>Justifications : - Performance : Bas\u00e9 sur Starlette, tr\u00e8s rapide (comparable \u00e0 Node.js/Go) - Typage : Validation automatique via Pydantic (r\u00e9duction erreurs) - Documentation : G\u00e9n\u00e9ration automatique Swagger/OpenAPI - Moderne : Async/await natif, standards r\u00e9cents Python - Communaut\u00e9 : Large adoption, excellent support</p> <p>Alternative consid\u00e9r\u00e9e : Flask (plus simple mais moins features int\u00e9gr\u00e9es)</p>"},{"location":"technical/justifications/#xgboost-comme-modele","title":"XGBoost comme Mod\u00e8le","text":"<p>D\u00e9cision : XGBoost pour la pr\u00e9diction de d\u00e9missions</p> <p>Justifications : - Performance : Meilleurs r\u00e9sultats (F2=0.68, Recall=95%) - Vitesse : Pr\u00e9dictions en &lt; 100ms - Robustesse : G\u00e8re bien les donn\u00e9es d\u00e9s\u00e9quilibr\u00e9es - Optimisation : Recherche d'hyperparam\u00e8tres avec Optuna</p> <p>M\u00e9triques obtenues : | M\u00e9trique | Score | |----------|-------| | F2-Score | 0.6818 | | Precision | 82.14% | | Recall | 94.74% | | ROC-AUC | 93.26% |</p>"},{"location":"technical/justifications/#hugging-face-spaces","title":"Hugging Face Spaces","text":"<p>D\u00e9cision : D\u00e9ploiement sur HF Spaces</p> <p>Justifications : - Gratuit : H\u00e9bergement sans co\u00fbt - HTTPS : S\u00e9curit\u00e9 par d\u00e9faut - Simplicit\u00e9 : D\u00e9ploiement via Docker + git push - Fiabilit\u00e9 : Infrastructure stable - Visibilit\u00e9 : Plateforme reconnue ML</p> <p>Alternative consid\u00e9r\u00e9e : AWS/GCP (plus complexe, co\u00fbteux pour projet \u00e9tudiant)</p>"},{"location":"technical/justifications/#github-actions-pour-cicd","title":"GitHub Actions pour CI/CD","text":"<p>D\u00e9cision : GitHub Actions pour l'int\u00e9gration continue</p> <p>Justifications : - Int\u00e9gration native : D\u00e9j\u00e0 sur GitHub - Gratuit : 2000 minutes/mois (largement suffisant) - Simplicit\u00e9 : Configuration YAML simple - Automatisation : Tests \u00e0 chaque push/PR</p> <p>Workflow : 1. Push vers GitHub 2. GitHub Actions lance les 61 tests 3. Si succ\u00e8s \u2192 Badge vert sur README 4. Si \u00e9chec \u2192 Email de notification</p>"},{"location":"technical/justifications/#pydantic-pour-la-validation","title":"Pydantic pour la Validation","text":"<p>D\u00e9cision : Pydantic pour les sch\u00e9mas de donn\u00e9es</p> <p>Justifications : - Typage : Validation automatique des types - Erreurs claires : Messages d'erreur d\u00e9taill\u00e9s - Int\u00e9gration FastAPI : Support natif - Performance : Validation rapide (Rust backend)</p> <p>Exemple : <pre><code>class EmployeeData(BaseModel):\n    satisfaction_level: float = Field(ge=0, le=1)\n    # Validation automatique : 0 \u2264 satisfaction \u2264 1\n</code></pre></p>"},{"location":"user-guide/api-usage/","title":"Utilisation de l'API","text":""},{"location":"user-guide/api-usage/#authentification","title":"Authentification","text":"<p>Toutes les requetes necessitent une API Key dans le header :</p> <p>\\\\ X-API-Key: votre_cle_api \\\\</p>"},{"location":"user-guide/api-usage/#endpoints-disponibles","title":"Endpoints Disponibles","text":""},{"location":"user-guide/api-usage/#get-health","title":"GET /health","text":"<p>Verifier l'etat de l'API</p> <p>\\\\\bash curl https://Fox6768-api-demission-prediction.hf.space/health \\\\</p>"},{"location":"user-guide/api-usage/#post-predict","title":"POST /predict","text":"<p>Predire le risque de demission</p> <p>\\\\\bash curl -X POST \"https://Fox6768-api-demission-prediction.hf.space/predict\" \\   -H \"X-API-Key: votre_cle\" \\   -H \"Content-Type: application/json\" \\   -d @employee_data.json \\\\</p>"},{"location":"user-guide/api-usage/#get-history","title":"GET /history","text":"<p>Consulter l'historique des predictions</p> <p>\\\\\bash curl -H \"X-API-Key: votre_cle\" \\   https://Fox6768-api-demission-prediction.hf.space/history \\\\</p>"},{"location":"user-guide/api-usage/#formats-de-donnees","title":"Formats de Donnees","text":"<p>Voir Schemas API pour les details complets.</p>"},{"location":"user-guide/api-usage/#codes-de-reponse","title":"Codes de Reponse","text":"<ul> <li>200 : Succes</li> <li>401 : API Key invalide</li> <li>422 : Donnees invalides</li> <li>500 : Erreur serveur</li> </ul>"},{"location":"user-guide/authentication/","title":"Authentification","text":""},{"location":"user-guide/authentication/#vue-densemble","title":"\ud83d\udd10 Vue d'ensemble","text":"<p>L'API utilise une authentification par API Key via header HTTP pour s\u00e9curiser les endpoints de pr\u00e9diction.</p>"},{"location":"user-guide/authentication/#obtenir-votre-cle-api","title":"\ud83d\udd11 Obtenir votre Cl\u00e9 API","text":""},{"location":"user-guide/authentication/#en-developpement-local","title":"En d\u00e9veloppement local","text":"<p>Cr\u00e9ez un fichier <code>.env</code> \u00e0 la racine du projet : <pre><code>API_KEY=votre-cle-secrete-123456\n</code></pre></p>"},{"location":"user-guide/authentication/#en-production","title":"En production","text":"<p>Contactez l'administrateur pour obtenir votre cl\u00e9 API personnelle.</p>"},{"location":"user-guide/authentication/#utiliser-votre-cle","title":"\ud83d\udce1 Utiliser votre Cl\u00e9","text":""},{"location":"user-guide/authentication/#avec-curl","title":"Avec curl","text":"<pre><code>curl -X POST \"https://Fox6768-api-demission-prediction.hf.space/predict/new_employee\" \\\n  -H \"X-API-Key: VOTRE_CLE_API\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"satisfaction_level\": 0.75,\n    \"last_evaluation\": 0.86,\n    \"number_project\": 5,\n    \"average_montly_hours\": 200,\n    \"time_spend_company\": 4,\n    \"Work_accident\": 0,\n    \"promotion_last_5years\": 0,\n    \"departement\": \"IT\",\n    \"salary\": \"medium\"\n  }'\n</code></pre>"},{"location":"user-guide/authentication/#avec-python","title":"Avec Python","text":"<pre><code>import requests\nimport os\nfrom dotenv import load_dotenv\n\n# Charger la cl\u00e9 depuis .env\nload_dotenv()\nAPI_KEY = os.getenv(\"API_KEY\")\n\nurl = \"https://Fox6768-api-demission-prediction.hf.space/predict/new_employee\"\nheaders = {\n    \"X-API-Key\": API_KEY,\n    \"Content-Type\": \"application/json\"\n}\ndata = {\n    \"satisfaction_level\": 0.75,\n    \"last_evaluation\": 0.86,\n    \"number_project\": 5,\n    \"average_montly_hours\": 200,\n    \"time_spend_company\": 4,\n    \"Work_accident\": 0,\n    \"promotion_last_5years\": 0,\n    \"departement\": \"IT\",\n    \"salary\": \"medium\"\n}\n\nresponse = requests.post(url, headers=headers, json=data)\nif response.status_code == 200:\n    print(\"Pr\u00e9diction :\", response.json())\nelse:\n    print(\"Erreur :\", response.status_code, response.text)\n</code></pre>"},{"location":"user-guide/authentication/#avec-javascript","title":"Avec JavaScript","text":"<pre><code>const API_KEY = \"VOTRE_CLE_API\";\nconst url = \"https://Fox6768-api-demission-prediction.hf.space/predict/new_employee\";\n\nfetch(url, {\n  method: 'POST',\n  headers: {\n    'X-API-Key': API_KEY,\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({\n    satisfaction_level: 0.75,\n    last_evaluation: 0.86,\n    number_project: 5,\n    average_montly_hours: 200,\n    time_spend_company: 4,\n    Work_accident: 0,\n    promotion_last_5years: 0,\n    departement: \"IT\",\n    salary: \"medium\"\n  })\n})\n.then(response =&gt; response.json())\n.then(data =&gt; console.log(\"Pr\u00e9diction :\", data))\n.catch(error =&gt; console.error(\"Erreur :\", error));\n</code></pre>"},{"location":"user-guide/authentication/#endpoints","title":"\ud83c\udf10 Endpoints","text":""},{"location":"user-guide/authentication/#endpoints-publics-sans-api-key","title":"\u2705 Endpoints PUBLICS (sans API Key)","text":"Endpoint Description <code>GET /</code> Page d'accueil <code>GET /health</code> V\u00e9rifier le statut de l'API <code>GET /docs</code> Documentation Swagger"},{"location":"user-guide/authentication/#endpoints-proteges-api-key-requise","title":"\ud83d\udd12 Endpoints PROT\u00c9G\u00c9S (API Key requise)","text":"Endpoint Description <code>POST /predict/from_id/{id}</code> Pr\u00e9dire depuis un employ\u00e9 existant <code>POST /predict/new_employee</code> Pr\u00e9dire pour un nouvel employ\u00e9 <code>GET /predict/log/{id}</code> R\u00e9cup\u00e9rer un log de pr\u00e9diction <code>GET /employees</code> Liste des employ\u00e9s <code>GET /employees/{id}</code> D\u00e9tails d'un employ\u00e9 <code>GET /predictions/logs</code> Historique des pr\u00e9dictions <code>GET /stats</code> Statistiques globales"},{"location":"user-guide/authentication/#erreurs-courantes","title":"\u26a0\ufe0f Erreurs Courantes","text":""},{"location":"user-guide/authentication/#erreur-401-api-key-manquante","title":"Erreur 401 - API Key manquante","text":"<p>Message : <pre><code>{\n  \"detail\": \"\u274c API Key manquante. Ajoutez le header 'X-API-Key' \u00e0 votre requ\u00eate.\"\n}\n</code></pre></p> <p>Solution : Ajoutez le header <code>X-API-Key</code> avec votre cl\u00e9.</p>"},{"location":"user-guide/authentication/#erreur-401-api-key-invalide","title":"Erreur 401 - API Key invalide","text":"<p>Message : <pre><code>{\n  \"detail\": \"\u274c API Key invalide. V\u00e9rifiez votre cl\u00e9 d'authentification.\"\n}\n</code></pre></p> <p>Solutions possibles : - V\u00e9rifiez l'orthographe de la cl\u00e9 (pas d'espace, copie compl\u00e8te) - V\u00e9rifiez que le fichier <code>.env</code> est bien charg\u00e9 - Contactez l'administrateur pour v\u00e9rifier la validit\u00e9 de votre cl\u00e9</p>"},{"location":"user-guide/authentication/#bonnes-pratiques","title":"\ud83d\udd12 Bonnes Pratiques","text":""},{"location":"user-guide/authentication/#a-faire","title":"\u2705 \u00c0 FAIRE","text":"<ul> <li>Stocker la cl\u00e9 dans <code>.env</code> (jamais dans le code)</li> <li>Ajouter <code>.env</code> au <code>.gitignore</code></li> <li>Utiliser des variables d'environnement pour la production</li> <li>Ne pas partager votre cl\u00e9 publiquement</li> </ul>"},{"location":"user-guide/authentication/#a-eviter","title":"\u274c \u00c0 \u00c9VITER","text":"<ul> <li>\u274c Hard-coder la cl\u00e9 dans le code source</li> <li>\u274c Commiter le fichier <code>.env</code> sur Git</li> <li>\u274c Partager la cl\u00e9 dans des messages publics</li> <li>\u274c Utiliser la m\u00eame cl\u00e9 pour tous les environnements</li> </ul>"},{"location":"user-guide/authentication/#fichier-env","title":"\ud83d\udcdd Fichier .env","text":"<p>Cr\u00e9ez un fichier <code>.env</code> \u00e0 la racine du projet : <pre><code># API Key\nAPI_KEY=votre-cle-secrete-ici\n\n# Base de donn\u00e9es (si n\u00e9cessaire)\nDATABASE_URL=sqlite:///./hr_analytics.db\n</code></pre></p> <p>G\u00e9n\u00e9rer une cl\u00e9 s\u00e9curis\u00e9e : <pre><code>import secrets\nprint(secrets.token_urlsafe(32))\n</code></pre></p>"},{"location":"user-guide/authentication/#securite","title":"\ud83d\udee1\ufe0f S\u00e9curit\u00e9","text":"<p>L'API utilise HTTPS en production (Hugging Face Spaces), ce qui chiffre automatiquement les communications, y compris l'API Key transmise dans le header.</p> <p>Configuration du fichier <code>.gitignore</code> : <pre><code># Fichiers secrets\n.env\n*.env\n\n# Base de donn\u00e9es locale\n*.db\nhr_analytics.db\n</code></pre></p>"},{"location":"user-guide/authentication/#besoin-daide","title":"\ud83d\udcde Besoin d'Aide ?","text":"<p>Probl\u00e8mes d'authentification : - Erreur 401 persistante \u2192 V\u00e9rifiez votre cl\u00e9 - Cl\u00e9 perdue \u2192 Contactez l'administrateur - Cl\u00e9 compromise \u2192 Signalez imm\u00e9diatement</p> <p>Documentation compl\u00e8te : API Endpoints</p>"},{"location":"user-guide/errors/","title":"Gestion des Erreurs","text":""},{"location":"user-guide/errors/#codes-derreur-http","title":"Codes d'Erreur HTTP","text":""},{"location":"user-guide/errors/#200-ok","title":"200 OK","text":"<p>Signification : Requete reussie</p> <p>Exemple de reponse : <pre><code>{\n  \"prediction\": 1,\n  \"probability\": 0.85,\n  \"risk_level\": \"HIGH\",\n  \"message\": \"Risque eleve de demission\"\n}\n</code></pre></p>"},{"location":"user-guide/errors/#401-unauthorized","title":"401 Unauthorized","text":"<p>Cause : API Key manquante ou invalide</p> <p>Message d'erreur : <pre><code>{\n  \"detail\": \"Invalid or missing API Key\"\n}\n</code></pre></p> <p>Solutions : 1. Verifier que le header <code>X-API-Key</code> est present 2. Verifier que la cle API est correcte 3. Contacter l'administrateur pour obtenir une nouvelle cle</p> <p>Exemple de requete correcte : <pre><code>curl -H \"X-API-Key: votre_cle_valide\" \\\n  https://Fox6768-api-demission-prediction.hf.space/health\n</code></pre></p>"},{"location":"user-guide/errors/#422-unprocessable-entity","title":"422 Unprocessable Entity","text":"<p>Cause : Donnees invalides ou manquantes</p> <p>Message d'erreur : <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"satisfaction_level\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre></p> <p>Solutions : 1. Verifier que tous les champs obligatoires sont presents 2. Verifier les types de donnees (int, float, string) 3. Verifier les plages de valeurs (ex: satisfaction_level entre 0 et 1)</p> <p>Champs obligatoires : - satisfaction_level (float 0-1) - last_evaluation (float 0-1) - number_project (int) - average_montly_hours (int) - time_spend_company (int) - Work_accident (int 0 ou 1) - promotion_last_5years (int 0 ou 1) - departement (string) - salary (string: \"low\", \"medium\", \"high\")</p>"},{"location":"user-guide/errors/#500-internal-server-error","title":"500 Internal Server Error","text":"<p>Cause : Erreur cote serveur</p> <p>Message d'erreur : <pre><code>{\n  \"detail\": \"Internal server error\"\n}\n</code></pre></p> <p>Solutions : 1. Reessayer la requete apres quelques secondes 2. Verifier le statut de l'API sur https://status.huggingface.co 3. Contacter l'administrateur si le probleme persiste</p>"},{"location":"user-guide/errors/#erreurs-communes-et-solutions","title":"Erreurs Communes et Solutions","text":""},{"location":"user-guide/errors/#erreur-connection-timeout","title":"Erreur : \"Connection timeout\"","text":"<p>Cause : L'API ne repond pas</p> <p>Solutions : - Verifier votre connexion internet - Verifier que l'URL est correcte - Augmenter le timeout de la requete <pre><code>import requests\n\nresponse = requests.post(\n    url,\n    json=data,\n    timeout=30  # 30 secondes\n)\n</code></pre></p>"},{"location":"user-guide/errors/#erreur-invalid-department","title":"Erreur : \"Invalid department\"","text":"<p>Cause : Nom de departement non reconnu</p> <p>Departements valides : - sales - technical - support - IT - product_mng - marketing - RandD - accounting - hr - management</p> <p>Solution : Utiliser exactement un des noms ci-dessus (sensible a la casse)</p>"},{"location":"user-guide/errors/#erreur-invalid-salary-level","title":"Erreur : \"Invalid salary level\"","text":"<p>Cause : Niveau de salaire invalide</p> <p>Valeurs valides : - \"low\" - \"medium\" - \"high\"</p> <p>Solution : Utiliser exactement une des trois valeurs (en minuscules)</p>"},{"location":"user-guide/errors/#bonnes-pratiques-de-gestion-derreurs","title":"Bonnes Pratiques de Gestion d'Erreurs","text":""},{"location":"user-guide/errors/#python","title":"Python","text":"<pre><code>import requests\n\ndef safe_predict(employee_data):\n    try:\n        response = requests.post(\n            \"https://Fox6768-api-demission-prediction.hf.space/predict\",\n            headers={\"X-API-Key\": \"votre_cle\"},\n            json=employee_data,\n            timeout=10\n        )\n        response.raise_for_status()  # Leve une exception si erreur HTTP\n        return response.json()\n    except requests.exceptions.HTTPError as e:\n        print(f\"Erreur HTTP: {e.response.status_code}\")\n        print(f\"Detail: {e.response.json()}\")\n        return None\n    except requests.exceptions.Timeout:\n        print(\"Timeout: L'API ne repond pas\")\n        return None\n    except requests.exceptions.RequestException as e:\n        print(f\"Erreur reseau: {e}\")\n        return None\n\n# Utilisation\nresult = safe_predict(employee_data)\nif result:\n    print(f\"Prediction: {result['risk_level']}\")\nelse:\n    print(\"Echec de la prediction\")\n</code></pre>"},{"location":"user-guide/errors/#javascript","title":"JavaScript","text":"<pre><code>async function safePredictResignation(employeeData) {\n  try {\n    const response = await axios.post(\n      'https://Fox6768-api-demission-prediction.hf.space/predict',\n      employeeData,\n      {\n        headers: { 'X-API-Key': 'votre_cle' },\n        timeout: 10000\n      }\n    );\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      // Erreur HTTP (4xx, 5xx)\n      console.error('Erreur HTTP:', error.response.status);\n      console.error('Detail:', error.response.data);\n    } else if (error.request) {\n      // Pas de reponse\n      console.error('Pas de reponse de l API');\n    } else {\n      // Erreur de configuration\n      console.error('Erreur:', error.message);\n    }\n    return null;\n  }\n}\n</code></pre>"},{"location":"user-guide/errors/#support","title":"Support","text":"<p>Si vous rencontrez des erreurs non documentees :</p> <ol> <li>Consulter les logs de l'API</li> <li>Verifier la documentation Swagger</li> <li>Contacter l'administrateur</li> </ol>"},{"location":"user-guide/examples/","title":"Exemples d'Utilisation","text":""},{"location":"user-guide/examples/#exemple-1-employe-a-risque-eleve","title":"Exemple 1 : Employe a Risque Eleve","text":"<pre><code>{\n  \"satisfaction_level\": 0.2,\n  \"last_evaluation\": 0.9,\n  \"number_project\": 5,\n  \"average_montly_hours\": 280,\n  \"time_spend_company\": 4,\n  \"Work_accident\": 0,\n  \"promotion_last_5years\": 0,\n  \"departement\": \"technical\",\n  \"salary\": \"low\"\n}\n</code></pre> <p>Prediction : Risque ELEVE (probabilite 92%)</p> <p>Interpretation : - Satisfaction tres faible (0.2) - Performance elevee (0.9) mais surcharge de travail (280h/mois) - Aucune promotion malgre 4 ans d'anciennete - Salaire faible</p> <p>Action RH recommandee : Entretien prioritaire pour discuter evolution de carriere et equilibre vie pro/perso</p>"},{"location":"user-guide/examples/#exemple-2-employe-a-risque-faible","title":"Exemple 2 : Employe a Risque Faible","text":"<pre><code>{\n  \"satisfaction_level\": 0.8,\n  \"last_evaluation\": 0.75,\n  \"number_project\": 3,\n  \"average_montly_hours\": 160,\n  \"time_spend_company\": 2,\n  \"Work_accident\": 0,\n  \"promotion_last_5years\": 1,\n  \"departement\": \"management\",\n  \"salary\": \"high\"\n}\n</code></pre> <p>Prediction : Risque FAIBLE (probabilite 8%)</p> <p>Interpretation : - Tres satisfait (0.8) - Bonne evaluation (0.75) - Charge de travail normale (160h) - Promotion recente - Salaire eleve</p> <p>Action RH recommandee : Suivi de routine, employe engage</p>"},{"location":"user-guide/examples/#exemple-3-batch-de-predictions-python","title":"Exemple 3 : Batch de Predictions (Python)","text":"<pre><code>import requests\nimport pandas as pd\n\n# Liste d'employes\nemployees = [\n    {\n        \"satisfaction_level\": 0.38,\n        \"last_evaluation\": 0.53,\n        \"number_project\": 2,\n        \"average_montly_hours\": 157,\n        \"time_spend_company\": 3,\n        \"Work_accident\": 0,\n        \"promotion_last_5years\": 0,\n        \"departement\": \"sales\",\n        \"salary\": \"low\"\n    },\n    {\n        \"satisfaction_level\": 0.92,\n        \"last_evaluation\": 0.85,\n        \"number_project\": 4,\n        \"average_montly_hours\": 200,\n        \"time_spend_company\": 5,\n        \"Work_accident\": 0,\n        \"promotion_last_5years\": 1,\n        \"departement\": \"technical\",\n        \"salary\": \"high\"\n    }\n]\n\n# API endpoint\nurl = \"https://Fox6768-api-demission-prediction.hf.space/predict\"\nheaders = {\"X-API-Key\": \"votre_cle_api\"}\n\n# Boucle de predictions\nresults = []\nfor emp in employees:\n    response = requests.post(url, headers=headers, json=emp)\n    if response.status_code == 200:\n        results.append(response.json())\n        print(f\"Employe {emp['departement']}: {response.json()['risk_level']}\")\n    else:\n        print(f\"Erreur: {response.status_code}\")\n\n# Sauvegarde en CSV\ndf = pd.DataFrame(results)\ndf.to_csv(\"predictions_batch.csv\", index=False)\n</code></pre>"},{"location":"user-guide/examples/#exemple-4-integration-avec-excelcsv","title":"Exemple 4 : Integration avec Excel/CSV","text":"<pre><code>import pandas as pd\nimport requests\n\n# Charger fichier CSV avec donnees employes\ndf = pd.read_csv(\"employes.csv\")\n\n# Fonction de prediction\ndef predict_employee(row):\n    data = {\n        \"satisfaction_level\": row[\"satisfaction_level\"],\n        \"last_evaluation\": row[\"last_evaluation\"],\n        \"number_project\": row[\"number_project\"],\n        \"average_montly_hours\": row[\"average_montly_hours\"],\n        \"time_spend_company\": row[\"time_spend_company\"],\n        \"Work_accident\": row[\"Work_accident\"],\n        \"promotion_last_5years\": row[\"promotion_last_5years\"],\n        \"departement\": row[\"departement\"],\n        \"salary\": row[\"salary\"]\n    }\n\n    response = requests.post(\n        \"https://Fox6768-api-demission-prediction.hf.space/predict\",\n        headers={\"X-API-Key\": \"votre_cle\"},\n        json=data\n    )\n    return response.json()\n\n# Appliquer predictions\ndf[\"prediction\"] = df.apply(lambda row: predict_employee(row)[\"prediction\"], axis=1)\ndf[\"probability\"] = df.apply(lambda row: predict_employee(row)[\"probability\"], axis=1)\ndf[\"risk_level\"] = df.apply(lambda row: predict_employee(row)[\"risk_level\"], axis=1)\n\n# Sauvegarder resultats\ndf.to_csv(\"employes_avec_predictions.csv\", index=False)\nprint(f\"Predictions terminees pour {len(df)} employes\")\n</code></pre>"},{"location":"user-guide/examples/#exemple-5-utilisation-en-javascriptnodejs","title":"Exemple 5 : Utilisation en JavaScript/Node.js","text":"<pre><code>const axios = require('axios');\n\nasync function predictResignation(employeeData) {\n  try {\n    const response = await axios.post(\n      'https://Fox6768-api-demission-prediction.hf.space/predict',\n      employeeData,\n      {\n        headers: {\n          'X-API-Key': 'votre_cle_api',\n          'Content-Type': 'application/json'\n        }\n      }\n    );\n\n    console.log('Prediction:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Erreur:', error.response?.data || error.message);\n  }\n}\n\n// Exemple d'utilisation\nconst employee = {\n  satisfaction_level: 0.45,\n  last_evaluation: 0.68,\n  number_project: 3,\n  average_montly_hours: 180,\n  time_spend_company: 2,\n  Work_accident: 0,\n  promotion_last_5years: 0,\n  departement: 'IT',\n  salary: 'medium'\n};\n\npredictResignation(employee);\n</code></pre>"},{"location":"user-guide/examples/#cas-dusage-metier","title":"Cas d'Usage Metier","text":""},{"location":"user-guide/examples/#scenario-1-tableau-de-bord-rh","title":"Scenario 1 : Tableau de Bord RH","text":"<p>Utiliser l'API pour generer un dashboard temps reel des risques de demission par departement.</p>"},{"location":"user-guide/examples/#scenario-2-alertes-automatiques","title":"Scenario 2 : Alertes Automatiques","text":"<p>Configurer un script quotidien qui envoie des alertes email aux managers quand un employe atteint un seuil de risque &gt; 70%.</p>"},{"location":"user-guide/examples/#scenario-3-analyse-predictive","title":"Scenario 3 : Analyse Predictive","text":"<p>Integrer les predictions dans un outil BI (Power BI, Tableau) pour analyser les tendances.</p>"}]}